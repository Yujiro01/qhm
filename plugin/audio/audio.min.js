!function(){var a=function(b,c,d){this.audio=b,this.$player=c,this.options=$.extend({},a.DEFAULTS,d),this.setLabel(),this.$player.on("click.qhm.audio",$.proxy(this.togglePlayer,this)),this.options.bar&&this.createBar(),$(this.audio).on("play.qhm.audio",$.proxy(this.options.playCallback,this)).on("pause.qhm.audio",$.proxy(this.options.pauseCallback,this)).on("timeupdate.qhm.audio",$.proxy(this.update,this)).on("ended.qhm.audio",$.proxy(this.end,this))};a.DEFAULTS={pauseOtherPlayers:!0,bar:!0,barColor:"#2ecc71",barHeight:2,playLabel:"Play",pauseLabel:"Pause",playCallback:function(){if(this.setLabel(),this.options.pauseOtherPlayers&&a.pauseAllPlayers(),this.options.bar){var b=0;$.each(a.playingAudios,function(){b+=this.options.barHeight}),this.$bar.addClass("in").css("top",b)}a.playingAudios[this.toString()]=this},pauseCallback:function(){this.setLabel(),this.options.bar&&this.$bar.removeClass("in"),delete a.playingAudios[this.toString()];var b=0;$.each(a.playingAudios,function(a){this.$bar.css("top",b),b+=this.options.barHeight})}},a.playingAudios={},a.pauseAllPlayers=function(){$.each(a.playingAudios,function(){this.pause()})},a.prototype.setLabel=function(){this.audio.paused?this.$player.html(this.options.playLabel):this.$player.html(this.options.pauseLabel)},a.prototype.togglePlayer=function(a){a.preventDefault(),this.audio.paused?this.play():this.pause()},a.prototype.play=function(a){this.audio.paused&&this.audio.play()},a.prototype.pause=function(a){this.audio.paused||this.audio.pause()},a.prototype.update=function(a){if(this.options.bar){var b=this.audio.currentTime/this.audio.duration*100;this.$bar.attr("data-value",b).width(b+"%")}},a.prototype.end=function(a){this.options.bar&&this.$bar.attr("data-value",0).width(0)},a.prototype.createBar=function(){var a=$("<div></div>",{"class":"qhm-plugin-audio-bar fade",dataValue:0,dataColor:this.options.barColor}).css("background-color",this.options.barColor);$("body").append(a),this.$bar=a},a.prototype.toString=function(){return"QHM Audio: "+this.audio.id},$.fn.qhmaudio=function(b){return this.each(function(){var c=$(this),d=c.data("qhm.audio"),e=$.extend({},a.DEFAULTS,c.data(),"object"==typeof b&&b),f="string"==typeof b?b:!1,g=c.attr("href")||c.attr("data-target"),h=$(g).get(0);"undefined"!=typeof h&&"undefined"!=typeof h.paused&&(d?f&&d[f]():c.data("qhm.audio",d=new a(h,c,e)))})},$.fn.qhmaudio.Constructor=a,$(document).on("ready",function(){$("[data-toggle=qhm-audio]").qhmaudio()})}();